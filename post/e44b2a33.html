<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="baidu-site-verification" content="AOWe2s7fmu">
  

  
  <title>解决问题集锦-Ionic - IT姑凉</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Q：注意ionic1 controller里有let声明变量造成页面加载不了; 数组类的赋值考虑为空的时候赋为 []; Q：app打包成apk文件以后，如何查看VersionCode、VersionName等版本信息使用aapt工具，aapt.exe工具 即 Android Asset Packaging Tool，在SDK的build-tools目录下。  操作流程：# 1、首先找到aapt工具">
<meta name="keywords" content="FAQ,Ionic">
<meta property="og:type" content="article">
<meta property="og:title" content="解决问题集锦-Ionic">
<meta property="og:url" content="http://www.itguliang.com/post/e44b2a33.html">
<meta property="og:site_name" content="IT姑凉">
<meta property="og:description" content="Q：注意ionic1 controller里有let声明变量造成页面加载不了; 数组类的赋值考虑为空的时候赋为 []; Q：app打包成apk文件以后，如何查看VersionCode、VersionName等版本信息使用aapt工具，aapt.exe工具 即 Android Asset Packaging Tool，在SDK的build-tools目录下。  操作流程：# 1、首先找到aapt工具">
<meta property="og:locale" content="zh-cn">
<meta property="og:updated_time" content="2019-07-16T12:54:33.863Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="解决问题集锦-Ionic">
<meta name="twitter:description" content="Q：注意ionic1 controller里有let声明变量造成页面加载不了; 数组类的赋值考虑为空的时候赋为 []; Q：app打包成apk文件以后，如何查看VersionCode、VersionName等版本信息使用aapt工具，aapt.exe工具 即 Android Asset Packaging Tool，在SDK的build-tools目录下。  操作流程：# 1、首先找到aapt工具">
  <script type="text/javascript" src="/js/jquery.min.js"></script>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  
    <link rel="icon" href="/images/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">

  <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?f99d0bf41afc30124dd1b713ee636bd4";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
  </script>

</head>
</html>
<body>
    <header id="header">
  <div id="header-bar">
    <a href="/" id="logo">
    	<img src="/images/logo.png" alt="IT姑凉">
    	<span>IT姑凉</span>
    </a>
  </div>
</header>
    
    <div id="container">
  
    <div class="post">
      
      <article id="post-FAQ-ionic" class="article article-type-post" itemscope="" itemprop="blogPost">

        <div class="article-inner">
          
          
          <header>
            
  
    <h1 class="article-title" itemprop="name">
      解决问题集锦-Ionic
    </h1>
  

            <div class="article-meta">
              <a class="article-date">
  <i class="far fa-calendar-alt"></i>
  <time datetime="2018-11-27T16:00:00.000Z" itemprop="datePublished">2018-11-28</time>
</a>
              
              <span class="article-category">
                <i class="far fa-folder-open" style="color: #999;"></i>
                <a class="article-category-link" href="/categories/IT/">IT</a>
              </span>
              
              
              <span class="article-category-link">
                <i class="far fa-eye"></i>
                <span id="/post/e44b2a33.html" class="leancloud_visitors" data-flag-title="解决问题集锦-Ionic"></span>
              </span>
              
              <span class="article-category">
                <a class="article-category-link">IT交流群：123493055</a>
              </span>
            </div>

          </header>
          
          <div class="article-entry" itemprop="articleBody">
            
            <h3 id="Q：注意"><a href="#Q：注意" class="headerlink" title="Q：注意"></a>Q：注意</h3><p>ionic1 controller里有let声明变量造成页面加载不了;</p>
<p>数组类的赋值考虑为空的时候赋为 [];</p>
<h3 id="Q：app打包成apk文件以后，如何查看VersionCode、VersionName等版本信息"><a href="#Q：app打包成apk文件以后，如何查看VersionCode、VersionName等版本信息" class="headerlink" title="Q：app打包成apk文件以后，如何查看VersionCode、VersionName等版本信息"></a>Q：app打包成apk文件以后，如何查看VersionCode、VersionName等版本信息</h3><p>使用aapt工具，aapt.exe工具 即 Android Asset Packaging Tool，在SDK的build-tools目录下。 </p>
<p>操作流程：<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1、首先找到aapt工具，在Android SDK文件夹下的build-tools包里，如下</span></span><br><span class="line"><span class="built_in">cd</span> xxx路径/SDK/build-tools/23.0.0_rc3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2、然后使用aapt dump badging XXX.apk</span></span><br><span class="line">aapt dump badging XXX路径/XXX.apk</span><br><span class="line"><span class="comment"># 如果不管用，前面加 ./</span></span><br><span class="line">./aapt dump badging XXX路径/XXX.apk</span><br><span class="line"><span class="comment"># 就能看到PackageName，VersionCode，LauncherActivity等信息</span></span><br></pre></td></tr></table></figure></p>
<h3 id="Q：angular-页面滚动到指定位置"><a href="#Q：angular-页面滚动到指定位置" class="headerlink" title="Q：angular 页面滚动到指定位置"></a>Q：angular 页面滚动到指定位置</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$location.hash(<span class="string">'category'</span>);</span><br><span class="line">$anchorScroll();</span><br></pre></td></tr></table></figure>
<h3 id="Q：angularjs用div-contenteditable-模拟输入框自动变化高度，ng-model双向数据绑定，附带placeholder效果"><a href="#Q：angularjs用div-contenteditable-模拟输入框自动变化高度，ng-model双向数据绑定，附带placeholder效果" class="headerlink" title="Q：angularjs用div contenteditable 模拟输入框自动变化高度，ng-model双向数据绑定，附带placeholder效果"></a>Q：angularjs用div contenteditable 模拟输入框自动变化高度，ng-model双向数据绑定，附带placeholder效果</h3><p>用textarea标签来做高度自适应输入功能有点麻烦，用div加个h5属性 <code>contenteditable=&quot;true&quot;</code> 即可使用 <code>ng-model</code> 实现双向绑定，和高度自适应的功能。<br>注意：苹果手机不支持h5属性<code>contenteditable=&quot;true&quot;</code>，需添加样式<code>-webkit-user-select:text</code></p>
<p>html:<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">placeholder</span>=<span class="string">"请输入"</span> <span class="attr">contenteditable</span>=<span class="string">"true"</span> <span class="attr">ng-model</span>=<span class="string">"model"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>CSS:<br><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line">  <span class="attribute">-webkit-user-select</span>:text;　</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">:empty</span><span class="selector-pseudo">:before</span>&#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="built_in">attr</span>(placeholder);  </span><br><span class="line">  <span class="attribute">color</span>:<span class="number">#bbb</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>directive:<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">.directive(<span class="string">'contenteditable'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      restrict: <span class="string">'A'</span>,</span><br><span class="line">      <span class="built_in">require</span>: <span class="string">'?ngModel'</span>,</span><br><span class="line">      link: <span class="function"><span class="keyword">function</span>(<span class="params">scope, element, attrs,ngModel</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!ngModel) &#123;</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ngModel.$render = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">          element.html(ngModel.$viewValue || <span class="string">''</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">        element.bind(<span class="string">'keyup'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">          scope.$apply(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> html=element.html();</span><br><span class="line">            ngModel.$setViewValue(html);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>有个问题是光标总是定位在开头，自行百度</p>
<h3 id="Q：div-包裹-input-checkbox点击问题"><a href="#Q：div-包裹-input-checkbox点击问题" class="headerlink" title="Q：div 包裹 input checkbox点击问题"></a>Q：div 包裹 input checkbox点击问题</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 点击div即checkbox或者文字都可以实现是否同意的操作 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 结果点击checkbox无效 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>  <span class="attr">ng-click</span>=<span class="string">"agree()"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">ng-model</span>=<span class="string">"isAgree"</span> /&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>我同意并自愿作出以上承诺<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>➣解决：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 点击div即checkbox或者文字都可以实现是否同意的操作 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 结果点击checkbox无效 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>  <span class="attr">ng-click</span>=<span class="string">"agree()"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">ng-click</span>=<span class="string">"checkboxAgree($event)"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">ng-model</span>=<span class="string">"isAgree"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>我同意并自愿作出以上承诺<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>停止事件冒泡,当点击的是checkbox时,就不执行父div的click</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$scope.checkboxAgree = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  e.stopPropagation();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="Q：-cordovaFileTransfer下载图片后系统相册无法显示图片"><a href="#Q：-cordovaFileTransfer下载图片后系统相册无法显示图片" class="headerlink" title="Q：$cordovaFileTransfer下载图片后系统相册无法显示图片"></a>Q：$cordovaFileTransfer下载图片后系统相册无法显示图片</h3><p>➣解决：<br>android 下载到 cordova.file.externalRootDirectory Download：<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 插件地址：https://github.com/lotterfriends/refreshgallery</span></span><br><span class="line">$ cordova plugin add cordova-plugin-refresh-gallery</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载成功js中添加下面代码,相当于通知系统相册进行刷新</span></span><br><span class="line">refreshMedia.refresh(targetPath); <span class="comment"># Refresh the image gallery</span></span><br></pre></td></tr></table></figure></p>
<h3 id="Q：You-don’t-have-write-permissions-for-the-Library-Ruby-Gems-2-0-0-directory"><a href="#Q：You-don’t-have-write-permissions-for-the-Library-Ruby-Gems-2-0-0-directory" class="headerlink" title="Q：You don’t have write permissions for the /Library/Ruby/Gems/2.0.0 directory."></a>Q：You don’t have write permissions for the /Library/Ruby/Gems/2.0.0 directory.</h3><p>只需要在命令前加上sudo</p>
<p>例如:sudo gem install cocoapods</p>
<p>sudo是获取管理员权限,现在按照步骤输入管理员密码即可.</p>
<h3 id="Q：cordova-android-6-3-0编译遇到问题，可能需要要重新安装cordova-plugin-compat"><a href="#Q：cordova-android-6-3-0编译遇到问题，可能需要要重新安装cordova-plugin-compat" class="headerlink" title="Q：cordova-android@6.3.0编译遇到问题，可能需要要重新安装cordova-plugin-compat"></a>Q：<a href="mailto:cordova-android@6.3.0" rel="external nofollow noopener noreferrer" target="_blank">cordova-android@6.3.0</a>编译遇到问题，可能需要要重新安装cordova-plugin-compat</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">What went wrong:</span><br><span class="line">Execution failed <span class="keyword">for</span> task <span class="string">':transformClassesWithDexForDebug'</span>.</span><br><span class="line">&gt; </span><br><span class="line">com.android.build.api.transform.TransformException: </span><br><span class="line">com.android.ide.common.process.ProcessException: </span><br><span class="line">java.util.concurrent.ExecutionException: com.android.dex.DexException: </span><br><span class="line">Multiple dex files define Lorg/apache/cordova/PermissionHelper;</span><br></pre></td></tr></table></figure>
<p>➣解决：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ cordova plugin rm cordova-plugin-compat --force</span><br><span class="line">$ cordova plugin add cordova-plugin-compat@1.2</span><br><span class="line">$ cordova platform rm android</span><br><span class="line">$ cordova platform add android@6.3.0</span><br></pre></td></tr></table></figure>
<h3 id="Q：Android端视频播放集成预览插件"><a href="#Q：Android端视频播放集成预览插件" class="headerlink" title="Q：Android端视频播放集成预览插件"></a>Q：Android端视频播放集成预览插件</h3><p>Android视频播放插件:Vitamio-Cordova-Plugin</p>
<p>直播发送图片预览插件:cordova-plugin-ImagePicker</p>
<p>报错： LOAD FFMPEG ERROR: dlopen failed: /data/data/xxx.xx.com.cn/libs/libffmpeg.so: has text relocations ….</p>
<p>➣解决：</p>
<p>需要配置AndroidManifest.xml targetSdk低于23</p>
<p><uses-sdk android:minsdkversion="17" android:targetsdkversion="22"></uses-sdk></p>
<h3 id="Q：angular5-使用angular-cli搭建项目ng-build后，failed-to-load-resource-文件路径问题"><a href="#Q：angular5-使用angular-cli搭建项目ng-build后，failed-to-load-resource-文件路径问题" class="headerlink" title="Q：angular5 使用angular-cli搭建项目ng build后，failed to load resource 文件路径问题"></a>Q：angular5 使用angular-cli搭建项目ng build后，failed to load resource 文件路径问题</h3><p>打包时执行：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//--base-href后面为打包后的base路径</span></span><br><span class="line">ng build --base-href ./</span><br></pre></td></tr></table></figure>
<p>或者，在package.json文件的scripts中添加命令：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//--base-href后面为打包后的base路径</span></span><br><span class="line"><span class="string">"build"</span>:<span class="string">"ng build --base-href ./"</span></span><br></pre></td></tr></table></figure>
<p>打包的时候，执行npm run build 即可</p>
<h3 id="Q：cordova-监听后台运行切换"><a href="#Q：cordova-监听后台运行切换" class="headerlink" title="Q：cordova 监听后台运行切换"></a>Q：cordova 监听后台运行切换</h3><p><a href="http://cordova.apache.org/docs/en/latest/cordova/events/events.html#pause" title="pause" rel="external nofollow noopener noreferrer" target="_blank">后台运行 pause</a></p>
<p><a href="http://cordova.apache.org/docs/en/latest/cordova/events/events.html#resume" title="resume" rel="external nofollow noopener noreferrer" target="_blank">前台运行 resume</a></p>
<h3 id="Q：a-href-tel和sms-ios失效问题"><a href="#Q：a-href-tel和sms-ios失效问题" class="headerlink" title="Q：a href tel和sms ios失效问题"></a>Q：a href tel和sms ios失效问题</h3><p>document.location.href = ‘tel:’ + mobile;</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">config.xml</span><br><span class="line">&lt;access launch-external=<span class="string">"yes"</span> origin=<span class="string">"tel:*"</span> /&gt;</span><br><span class="line">&lt;access launch-external=<span class="string">"yes"</span> origin=<span class="string">"sms:*"</span> /&gt;</span><br><span class="line">ios添加</span><br><span class="line">&lt;allow-navigation href=<span class="string">"sms:*"</span> /&gt;</span><br><span class="line">&lt;allow-navigation href=<span class="string">"tel:*"</span> /&gt;</span><br></pre></td></tr></table></figure>
<h3 id="Q：cordova-plugin-inappbrowser插件-IOS-打开链接（jsp）loading不消失"><a href="#Q：cordova-plugin-inappbrowser插件-IOS-打开链接（jsp）loading不消失" class="headerlink" title="Q：cordova-plugin-inappbrowser插件 IOS 打开链接（jsp）loading不消失"></a>Q：cordova-plugin-inappbrowser插件 IOS 打开链接（jsp）loading不消失</h3><p>ios-webview加载进度问题，debug看了下，正常情况应该是 <code>webViewDidStartLoad</code> –&gt; <code>self.spinner startAnimating</code> –&gt; <code>webViewDidFinishLoad</code> –&gt; <code>self.spinner stopAnimating</code>。</p>
<p>但是项目中有个链接，打开后有跳转，不会执行<code>webViewDidFinishLoad</code>，执行了<code>didFailLoadWithError</code> –&gt; <code>self.spinner stopAnimating</code>又执行了<code>webViewDidStartLoad</code> –&gt; <code>self.spinner startAnimating</code>然后没反应了。</p>
<p>经过排除，在jsp页面onload后再跳转即可解决loading不消失问题</p>
<h3 id="Q：IOS8用户无法升级和下载或者闪退"><a href="#Q：IOS8用户无法升级和下载或者闪退" class="headerlink" title="Q：IOS8用户无法升级和下载或者闪退"></a>Q：IOS8用户无法升级和下载或者闪退</h3><p>4.4.0以上不兼容ios8</p>
<p>ionic platform add <a href="mailto:ios@4.3.1" rel="external nofollow noopener noreferrer" target="_blank">ios@4.3.1</a> </p>
<h3 id="Q：IOS8兼容问题"><a href="#Q：IOS8兼容问题" class="headerlink" title="Q：IOS8兼容问题"></a>Q：IOS8兼容问题</h3><p>transform、flex-wrap需要加-webkit-前缀</p>
<h3 id="Q：Cordova升级打包后版本号versioncode由6位变为5位-导致升级后版本号低于之前版本不能安装"><a href="#Q：Cordova升级打包后版本号versioncode由6位变为5位-导致升级后版本号低于之前版本不能安装" class="headerlink" title="Q：Cordova升级打包后版本号versioncode由6位变为5位,导致升级后版本号低于之前版本不能安装"></a>Q：Cordova升级打包后版本号versioncode由6位变为5位,导致升级后版本号低于之前版本不能安装</h3><p>修改platforms&gt;android&gt;cordova&gt;lib&gt;prepare.js中function default_versionCode计算versionCode的代码</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">default_versionCode</span> (<span class="params">version</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> nums = version.split(<span class="string">'-'</span>)[<span class="number">0</span>].split(<span class="string">'.'</span>);</span><br><span class="line">   <span class="keyword">var</span> versionCode = <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">if</span> (+nums[<span class="number">0</span>]) &#123;</span><br><span class="line">     versionCode += +nums[<span class="number">0</span>] * <span class="number">100000</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">if</span> (+nums[<span class="number">1</span>]) &#123;</span><br><span class="line">     versionCode += +nums[<span class="number">1</span>] * <span class="number">100</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">if</span> (+nums[<span class="number">2</span>]) &#123;</span><br><span class="line">     versionCode += +nums[<span class="number">2</span>] * <span class="number">10</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   events.emit(<span class="string">'verbose'</span>, <span class="string">'android-versionCode not found in config.xml. Generating a code based on version in config.xml ('</span> + version + <span class="string">'): '</span> + versionCode);</span><br><span class="line">   <span class="keyword">return</span> versionCode;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Q：-ionic-v1-ionicScrollDelegate-scroll-methods-don’t-work-on-iOS"><a href="#Q：-ionic-v1-ionicScrollDelegate-scroll-methods-don’t-work-on-iOS" class="headerlink" title="Q： ionic-v1 $ionicScrollDelegate scroll methods don’t work on iOS"></a>Q： ionic-v1 $ionicScrollDelegate scroll methods don’t work on iOS</h3><p>登录界面，键盘弹起，界面向上滚动<code>scrollTop()</code>，键盘收起，界面恢复<code>scrollTo()</code>。结果ios不起作用，Android可以，ios下看了效果，<code>transform: translate3d(0px, valuepx, 0px) scale(1)</code> 中value根本不是自己设置的值</p>
<p>➣解决：<br>向上滚动的css：<br><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;!<span class="selector-tag">--</span> 值自己设置 <span class="selector-tag">--</span>&gt;</span><br><span class="line"><span class="selector-class">.login-scroll</span> <span class="selector-class">.scroll</span>&#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(0px, -157px, 0px) <span class="built_in">scale</span>(1) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>html:<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ion-content</span> <span class="attr">ng-class</span>=<span class="string">"&#123;'login-scroll':loginScroll&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">ion-content</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>监听键盘弹起与收起：<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$scope.loginScroll=<span class="literal">false</span>;<span class="comment">//默认为false</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">keyboardshow</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  $scope.loginScroll=<span class="literal">true</span>;</span><br><span class="line">  <span class="comment">// $ionicScrollDelegate.scrollTo(0, 155, true);//ios不管用</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">keyboardhide</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  $scope.loginScroll=<span class="literal">false</span>;</span><br><span class="line">  <span class="comment">// $ionicScrollDelegate.scrollTop(true);//ios不管用</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'native.keyboardshow'</span>, keyboardshow);</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'native.keyboardhide'</span>, keyboardhide);</span><br></pre></td></tr></table></figure></p>
<h3 id="Q：ionic项目中锚点跳转"><a href="#Q：ionic项目中锚点跳转" class="headerlink" title="Q：ionic项目中锚点跳转"></a>Q：ionic项目中锚点跳转</h3><p>➣解决：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//&lt;div id="itguliang" &gt;</span></span><br><span class="line">$location.hash(<span class="string">'itguliang'</span>);<span class="comment">//id</span></span><br><span class="line">$anchorScroll();</span><br></pre></td></tr></table></figure>
<h3 id="Q：ionic项目中-location-hash、-anchorscroll锚点跳转后，ios下页面无法向上滑动，只允许向下滑动"><a href="#Q：ionic项目中-location-hash、-anchorscroll锚点跳转后，ios下页面无法向上滑动，只允许向下滑动" class="headerlink" title="Q：ionic项目中$location.hash、$anchorscroll锚点跳转后，ios下页面无法向上滑动，只允许向下滑动"></a>Q：ionic项目中$location.hash、$anchorscroll锚点跳转后，ios下页面无法向上滑动，只允许向下滑动</h3><p>➣解决：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 加上 overflow-scroll="true" --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ion-content</span> <span class="attr">overflow-scroll</span>=<span class="string">"true"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="Q：Ionic-调用键盘搜索"><a href="#Q：Ionic-调用键盘搜索" class="headerlink" title="Q：Ionic 调用键盘搜索"></a>Q：Ionic 调用键盘搜索</h3><p>html:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"#"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"search"</span> <span class="attr">placeholder</span>=<span class="string">"输入关键字"</span> </span></span><br><span class="line"><span class="tag">	   <span class="attr">ng-model</span>=<span class="string">"search.key"</span> <span class="attr">ng-focus</span>=<span class="string">"searchInput()"</span> </span></span><br><span class="line"><span class="tag">	   <span class="attr">ng-enter</span>=<span class="string">"doSearch(search.key)"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>directive:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">.directive(<span class="string">'ngEnter'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">scope, element, attrs</span>) </span>&#123;</span><br><span class="line">    element.bind(<span class="string">"keydown keypress"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(event.which === <span class="number">13</span>) &#123;</span><br><span class="line">        scope.$apply(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">          scope.$<span class="built_in">eval</span>(attrs.ngEnter);</span><br><span class="line">		&#125;);</span><br><span class="line">		event.preventDefault();</span><br><span class="line">	  &#125;</span><br><span class="line">	&#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="Q：angularjs中ui-sref传递参数"><a href="#Q：angularjs中ui-sref传递参数" class="headerlink" title="Q：angularjs中ui-sref传递参数"></a>Q：angularjs中ui-sref传递参数</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col"</span> <span class="attr">ui-sref</span>=<span class="string">"app.home-search(&#123;flag:'course'&#125;)"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col"</span> <span class="attr">ui-sref</span>=<span class="string">"app.home-search(&#123;type: 1, role: 2&#125;)"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="Q：angularjs中-http模块POST请求request-payload转form-data"><a href="#Q：angularjs中-http模块POST请求request-payload转form-data" class="headerlink" title="Q：angularjs中$http模块POST请求request payload转form data"></a>Q：angularjs中$http模块POST请求request payload转form data</h3><p>对接后台接口，用post不成功，后台人员截图过来又说他那边可以，对比过后发现angular post请求表单参数在Request payload<br>他的在Form data,搜了解决方法有两种</p>
<p>解决1配置$httpProvider：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> myApp = angular.module(<span class="string">'app'</span>,[]);  </span><br><span class="line">myApp.config(<span class="function"><span class="keyword">function</span>(<span class="params">$httpProvider</span>)</span>&#123;  </span><br><span class="line"></span><br><span class="line">  $httpProvider.defaults.transformRequest = <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;  </span><br><span class="line">    <span class="keyword">var</span> str = [];  </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> p <span class="keyword">in</span> obj)&#123;</span><br><span class="line">      str.push(<span class="built_in">encodeURIComponent</span>(p) + <span class="string">"="</span> + <span class="built_in">encodeURIComponent</span>(obj[p]));  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">return</span> str.join(<span class="string">"&amp;"</span>);  </span><br><span class="line">  &#125;  </span><br><span class="line"></span><br><span class="line">  $httpProvider.defaults.headers.post = &#123;</span><br><span class="line">    <span class="string">'Content-Type'</span>: <span class="string">'application/x-www-form-urlencoded'</span>  </span><br><span class="line">  &#125;  </span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>解决2在post中配置：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> url = ApiService.getEndpoint() + <span class="string">"api/feedback/appSave.do"</span>;</span><br><span class="line"><span class="keyword">return</span> $http(&#123;</span><br><span class="line">  url: url,</span><br><span class="line">  method: <span class="string">'POST'</span>,</span><br><span class="line">  headers: &#123;</span><br><span class="line">    <span class="string">'Content-Type'</span>: <span class="string">'application/x-www-form-urlencoded; charset=UTF-8'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  transformRequest: <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> str = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> p <span class="keyword">in</span> obj) &#123;</span><br><span class="line">      str.push(<span class="built_in">encodeURIComponent</span>(p) + <span class="string">"="</span> + <span class="built_in">encodeURIComponent</span>(obj[p]));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> str.join(<span class="string">"&amp;"</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  data: data</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>ps:如果加载了jquery可以直接这样使用</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">transformRequest : <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> $.param(data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Q：滑动到屏幕顶端不是内容顶端"><a href="#Q：滑动到屏幕顶端不是内容顶端" class="headerlink" title="Q：滑动到屏幕顶端不是内容顶端"></a>Q：滑动到屏幕顶端不是内容顶端</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> scroll = <span class="built_in">document</span>.getElementById(id).offsetTop - $ionicScrollDelegate.getScrollPosition().top;</span><br><span class="line">$ionicScrollDelegate.resize();</span><br><span class="line">$ionicScrollDelegate.scrollBy(<span class="number">0</span>, scroll, <span class="literal">true</span>);</span><br></pre></td></tr></table></figure>
<h3 id="Q：Ionic清除某一页面的cache"><a href="#Q：Ionic清除某一页面的cache" class="headerlink" title="Q：Ionic清除某一页面的cache"></a>Q：Ionic清除某一页面的cache</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$ionicHistory.clearCache([<span class="string">"tab.aa"</span>,<span class="string">"tab.bb"</span>]).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  $state.go(<span class="string">'tab.home'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="Q：angular-video-ng-src-不起作用"><a href="#Q：angular-video-ng-src-不起作用" class="headerlink" title="Q：angular video ng-src 不起作用"></a>Q：angular video ng-src 不起作用</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">app.filter(<span class="string">'trusted'</span>, [<span class="string">'$sce'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">$sce</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $sce.trustAsResourceUrl(url);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;]);</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">controls</span> <span class="attr">poster</span>=<span class="string">"img/poster.png"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">ng-src</span>=<span class="string">"&#123;&#123;object.src | trusted&#125;&#125;"</span> <span class="attr">type</span>=<span class="string">"video/mp4"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="Q：Ionic-angular切换语言-国际化问题"><a href="#Q：Ionic-angular切换语言-国际化问题" class="headerlink" title="Q：Ionic angular切换语言 国际化问题"></a>Q：Ionic angular切换语言 国际化问题</h3><p>移步至：<a href="http://itguliang.github.io/blog/2016/04/01/ionic-language/" title="国际化" rel="external nofollow noopener noreferrer" target="_blank">Ionic angular国际化问题</a></p>
<h3 id="Q：config-xml设置KeyboardDisplayRequiresUserAction为true，实现评论键盘自动弹出的功能-没试过"><a href="#Q：config-xml设置KeyboardDisplayRequiresUserAction为true，实现评论键盘自动弹出的功能-没试过" class="headerlink" title="Q：config.xml设置KeyboardDisplayRequiresUserAction为true，实现评论键盘自动弹出的功能(没试过)"></a>Q：config.xml设置KeyboardDisplayRequiresUserAction为true，实现评论键盘自动弹出的功能(没试过)</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">preference</span> <span class="attr">name</span>=<span class="string">"KeyboardDisplayRequiresUserAction"</span> <span class="attr">value</span>=<span class="string">"false"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="Q：网络情况-cordovaNetwork"><a href="#Q：网络情况-cordovaNetwork" class="headerlink" title="Q：网络情况$cordovaNetwork"></a>Q：网络情况$cordovaNetwork</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$rootScope.$on(<span class="string">'$ionicView.afterEnter'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">scopes, states</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">window</span>.cordova) &#123;</span><br><span class="line">    <span class="keyword">var</span> type = $cordovaNetwork.getNetwork();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (type == <span class="string">'2g'</span> || type == <span class="string">'none'</span>|| type == <span class="string">'unknown'</span>) &#123;</span><br><span class="line">      $cordovaToast.showLongCenter(<span class="string">'当前网络慢,请在网络顺畅情况下使用'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="Q：ion-slide-box-ng-repeat-刷新不显示问题"><a href="#Q：ion-slide-box-ng-repeat-刷新不显示问题" class="headerlink" title="Q：ion-slide-box ng-repeat 刷新不显示问题"></a>Q：ion-slide-box ng-repeat 刷新不显示问题</h3><p>ion-slide-box ng-repeat 刷新或者点击其他再回到页面ion-slide-box会不见</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"slider-slides"</span> <span class="attr">ng-transclude</span>=<span class="string">""</span> <span class="attr">style</span>=<span class="string">"width: 0px;"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>就是这个width会变为0</p>
<p><a href="http://forum.ionicframework.com/t/ion-slide-box-and-ng-repeat/9826" rel="external nofollow noopener noreferrer" target="_blank">http://forum.ionicframework.com/t/ion-slide-box-and-ng-repeat/9826</a></p>

            
          </div>
        </div>

        

        
        
<nav id="article-nav">
  
    <a href="/post/b0fc5aa.html" id="article-nav-newer" class="article-nav-link-wrap">
      <div class="article-nav-title">
        <i class="fa fa-chevron-left"></i>
        
          Cordova Android 端保存cookie 延时
        
      </div>
    </a>
  
  
    <a href="/post/1e5c2008.html" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">
        Video 视频播放防作弊和禁止下载
        <i class="fa fa-chevron-right"></i>
      </div>
    </a>
  
</nav>

        

        <div class="dashang-div">
          <a id="dashang" class="dashang" href="javascript:;" title="Donate 打赏"></a>
          <div id="payme" class="hidden">
            <img src="/images/pay.png">
          </div>
        </div>

      </article>
      <div>
        <h3 class="comment-title">评论</h3>
        <div id="comment"></div>
      </div>
    </div>
  </div>
  

  <script>
    $(function () {
      $(window).on('scroll', function () {
        var scrollTop = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop;
        if (scrollTop > 70) {
          $('#toc').addClass("toc-fixed");
          // document.getElementById('toc').style.top="0";
        } else {
          $('#toc').removeClass("toc-fixed");
          // document.getElementById('toc').style.position = "absolute";
        }
      });
      // 打赏
      document.getElementById('dashang').onclick = function () {
        var display = document.getElementById('payme').style.display;
        document.getElementById('payme').style.display = display == "block" ? "none" : "block";
      }
      // 评论
      new Valine({
        el: '#comment',
        notify: false,
        verify: false,
        appId: '7FkKwQXz56M9GU6KRpQxxCYr-gzGzoHsz',
        appKey: 'RYC5fHYsedrXiXT1xrNeEWfI',
        placeholder: '评论请先输入昵称喔～',
        path: window.location.pathname,
        avatar: 'mm'
      });
    });

  </script>
    
    <footer id="footer">
  
  <div id="footer-info" class="inner">
      &copy;2018-2019  IT姑凉版权所有 粤ICP备18137070号
  </div>
  <div class="back-to-top" id="back-to-top">
    <i class="fa fa-arrow-up"></i>
  </div>
</footer>

<script src="//cdn1.lncld.net/static/js/2.5.0/av-min.js"></script>
<script>
    var APP_ID = '7FkKwQXz56M9GU6KRpQxxCYr-gzGzoHsz';
    var APP_KEY = 'RYC5fHYsedrXiXT1xrNeEWfI';
    AV.init({
        appId: APP_ID,
        appKey: APP_KEY
    });
    // 显示次数
    function showTime(Counter) {
        var query = new AV.Query("Counter");
        if($(".leancloud_visitors").length > 0){
            var url = $(".leancloud_visitors").attr('id').trim();
            // where field
            query.equalTo("words", url);
            // count 
            query.count().then(function (number) {
                // There are number instances of MyClass where words equals url.
                $(document.getElementById(url)).text(number?  number : '--');
            }, function (error) {
                // error is an instance of AVError.
            });
        }
    }
    // 追加pv
    function addCount(Counter) {
        var url = $(".leancloud_visitors").length > 0 ? $(".leancloud_visitors").attr('id').trim() : 'icafebolger.com';
        var Counter = AV.Object.extend("Counter");
        var query = new Counter;
        query.save({
            words: url
        }).then(function (object) {
        })
    }
    $(function () {
        var Counter = AV.Object.extend("Counter");
        addCount(Counter);
        showTime(Counter);

        var backButton=$('#back-to-top');

        function backToTop() {
            $('html,body').animate({
                scrollTop: 0
            }, 800);
        }
        backButton.on('click', backToTop);
        
        $(window).on('scroll', function () {
            if($(window).scrollTop() > $(window).height())
                backButton.fadeIn();
            else
                backButton.fadeOut();
        });
    });
</script>
</body>
